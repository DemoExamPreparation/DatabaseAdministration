# Способы контроля доступа к данным и управления привилегиями
После проектирования логической структуры базы данных, связей между таблицами, 
ограничений целостности и других объектов необходимо определить категории пользователей, 
которые будут иметь доступ к базе данных.

Как правило, в СУБД организована двухуровневая настройка ограничения доступа к данным. 
На первом уровне необходимо создать так называемую учетную запись для подключения к самому серверу, 
что еще не дает возможности доступа к базам данных. 
На втором уровне для каждой базы данных сервера на основании учетной записи 
необходимо создать запись пользователя для подключения к базе данных. 
Учетную запись пользователя можно добавить, изменить или удалить.

Таким образом, сервер обеспечивает двухуровневую защиту данных:

1) аутентификацию на уровне сервера;
2) идентификацию на уровне базы данных.
Права доступа устанавливаются командой GRANT. 
Пользователь, выдающий права командой GRANT, может присвоить другому пользователю только те права, 
которыми он владеет сам, или более слабый набор прав. 
Для работы с таблицей или с представлением пользователь должен обладать правами на выполнение команд 
SELECT, INSERT, UPDATE, DELETE или REFERENCES. 
Для того чтобы задать привилегии на все эти команды сразу, можно использовать привилегию ALL. 
Для вызова хранимой процедуры в приложении пользователь или объект должны обладать правом на
выполнение команды EXECUTE.

Перед тем как присвоить пользователю новые права, необходимо забрать у него старые. 
Это позволяет сделать команда REVOKE. 
Привилегии, которые были предоставлены указанному пользователю другими пользователями, 
не могут быть затронуты оператором REVOKE.

Как правило, в работе с учетными записями используют более крупные объекты — роли. 
Роль представляет собой объект базы данных, 
обладающий некоторыми правами и содержащий в себе учетные записи пользователей. 
Работать с ролью гораздо удобнее, чем с отдельными пользователями. 
Намного проще переопределить права одной роли, чем каждой учетной записи в отдельности. 
Роль позволяет объединить в одну группу пользователей, выполняющих одинаковые функции. 
Для создания роли используется оператор:
```
CREATE ROLE <имя_роли>
```

Одна учетная запись может состоять сразу в нескольких ролях. 
Но во время одной сессии клиент может работать только под одной ролью. 
Это может быть удобно только в тех случаях, 
когда один пользователь должен иметь разные права доступа в зависимости от ситуации. 
Пользователь, работающий под правами какой-либо роли, наследует собственные права.

Каждая СУБД должна поддерживать механизм, гарантирующий, 
что доступ к базе данных смогут получить только те пользователи, 
которые имеют соответствующее разрешение. 
Язык SQL включает операторы GRANT и REVOKE, предназначенные для организации защиты таблиц в базе данных. 
Механизм защиты построен на использовании идентификаторов пользователей, 
предоставляемых им прав владения и привилегий.
